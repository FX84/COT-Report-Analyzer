# –ê–Ω–∞–ª–∏–∑ –æ—Ç—á–µ—Ç–æ–≤ Commitments of Traders –æ—Ç CFTC

**COT Analyzer** `cot.py` ‚Äî —ç—Ç–æ Python-—Å–∫—Ä–∏–ø—Ç –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏, –∞–Ω–∞–ª–∏–∑–∞ –∏ –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏–∏ –µ–∂–µ–Ω–µ–¥–µ–ª—å–Ω—ã—Ö –æ—Ç—á–µ—Ç–æ–≤ Commitments of Traders, –ø—É–±–ª–∏–∫—É–µ–º—ã—Ö CFTC (Commodity Futures Trading Commission).

–° –ø–æ–º–æ—â—å—é —ç—Ç–æ–≥–æ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ —Ç—Ä–µ–π–¥–µ—Ä –∏–ª–∏ –∞–Ω–∞–ª–∏—Ç–∏–∫ –º–æ–∂–µ—Ç:
- –°–∫–∞—á–∞—Ç—å –∏ –æ–±—Ä–∞–±–æ—Ç–∞—Ç—å COT-–æ—Ç—á–µ—Ç—ã –ø–æ –≤—ã–±—Ä–∞–Ω–Ω—ã–º –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞–º;
- –†–∞—Å—Å—á–∏—Ç–∞—Ç—å –∫–ª—é—á–µ–≤—ã–µ –ø–æ–∫–∞–∑–∞—Ç–µ–ª–∏ (Net Positions, COT Index, Percentile, Z-score);
- –û–ø—Ä–µ–¥–µ–ª–∏—Ç—å —Ä—ã–Ω–æ—á–Ω—ã–µ **—ç–∫—Å—Ç—Ä–µ–º—É–º—ã** –∏ –ø–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã–µ **—Ä–∞–∑–≤–æ—Ä–æ—Ç—ã**;
- –í–∏–∑—É–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –¥–∏–Ω–∞–º–∏–∫—É –ø–æ–∑–∏—Ü–∏–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ —Ä—ã–Ω–∫–∞;
- –°–æ—Ö—Ä–∞–Ω–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–Ω–∞–ª–∏–∑–∞ –≤ —Ñ–æ—Ä–º–∞—Ç–∞—Ö CSV, JSON –∏–ª–∏ SQLite.

---

## ‚öôÔ∏è –û—Å–Ω–æ–≤–Ω—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

‚úÖ –ó–∞–≥—Ä—É–∑–∫–∞ COT-–æ—Ç—á–µ—Ç–æ–≤ –Ω–∞–ø—Ä—è–º—É—é —Å —Å–∞–π—Ç–∞ **CFTC**  
‚úÖ –ö–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤  
‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Ç–∏–ø–æ–≤ –æ—Ç—á–µ—Ç–æ–≤:
- `legacy`  
- `legacy_futopt`  
- `disaggregated`  
- `tff` (Traders in Financial Futures)

‚úÖ –†–∞—Å—á–µ—Ç –º–µ—Ç—Ä–∏–∫:
- **Net Positions**
- **COT Index (Williams COT Index)**
- **Percentile (COT Percentile)**
- **Z-score**

‚úÖ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ:
- –≠–∫—Å—Ç—Ä–µ–º–∞–ª—å–Ω—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π (overbought/oversold)
- –ü–µ—Ä–µ—Å–µ—á–µ–Ω–∏–π —É—Ä–æ–≤–Ω—è 50 (—Å–º–µ–Ω–∞ –¥–æ–º–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏—è)
- –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª—å–Ω—ã—Ö –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏–π (–≤ –±—É–¥—É—â–µ–º –æ–±–Ω–æ–≤–ª–µ–Ω–∏–∏)

‚úÖ –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è:
- –ì—Ä–∞—Ñ–∏–∫–∏ –¥–∏–Ω–∞–º–∏–∫–∏ –ø–æ–∑–∏—Ü–∏–π –∏ –∏–Ω–¥–µ–∫—Å–æ–≤
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∏–∫–æ–≤ –≤ PNG

‚úÖ –≠–∫—Å–ø–æ—Ä—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤:
- `CSV`, `JSON`, `SQLite`

---

## üß© –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- Python **3.9+**
- –ë–∏–±–ª–∏–æ—Ç–µ–∫–∏:
```bash
pip install pandas numpy matplotlib requests tqdm python-dateutil
````

---

## üöÄ –ü—Ä–∏–º–µ—Ä –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

–°–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ –∏ –∞–Ω–∞–ª–∏–∑ –ø–æ –µ–≤—Ä–æ –∏ –∑–æ–ª–æ—Ç—É —Å –ø–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ–º –≥—Ä–∞—Ñ–∏–∫–æ–≤ –∏ —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ CSV+JSON:

```bash
python cot.py --markets "EUR,GC" --report disaggregated --window 156 --plot --export csv json
```

–ê–Ω–∞–ª–∏–∑ –¥–æ–ª–ª–∞—Ä–∞ –∏ –∏–Ω–¥–µ–∫—Å–∞ S&P 500, —Å —ç–∫—Å–ø–æ—Ä—Ç–æ–º –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö SQLite:

```bash
python cot.py --markets "DX,ES" --report tff --export sqlite --db cot.db
```

–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–∞ COT-—Ñ–∞–π–ª–æ–≤ –∏ –ø–æ–≤—ã—à–µ–Ω–Ω—ã–π —É—Ä–æ–≤–µ–Ω—å –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è:

```bash
python cot.py --markets "CL" --report legacy --force-download --verbose
```

---

## ‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏

| –ê—Ä–≥—É–º–µ–Ω—Ç           | –û–ø–∏—Å–∞–Ω–∏–µ                                           | –ü–æ —É–º–æ–ª—á–∞–Ω–∏—é    |
| ------------------ | -------------------------------------------------- | --------------- |
| `--markets`        | –°–ø–∏—Å–æ–∫ —Ä—ã–Ω–∫–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é (`EUR,GC,DX`)          | ‚Äî               |
| `--report`         | –¢–∏–ø –æ—Ç—á—ë—Ç–∞ (`legacy`, `disaggregated`, `tff`, ...) | `disaggregated` |
| `--start`, `--end` | –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º (—Ñ–æ—Ä–º–∞—Ç `YYYY-MM-DD`)          | –≤—Å–µ –¥–∞—Ç—ã        |
| `--outdir`         | –ü–∞–ø–∫–∞ –¥–ª—è —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤                   | `./cot_out`     |
| `--export`         | –§–æ—Ä–º–∞—Ç—ã —ç–∫—Å–ø–æ—Ä—Ç–∞ (`csv`, `json`, `sqlite`)         | `csv`           |
| `--db`             | –ü—É—Ç—å –∫ –±–∞–∑–µ SQLite (–µ—Å–ª–∏ –≤—ã–±—Ä–∞–Ω `sqlite`)          | `cot.db`        |
| `--window`         | –û–∫–Ω–æ (–≤ –Ω–µ–¥–µ–ª—è—Ö) –¥–ª—è —Ä–∞—Å—á—ë—Ç–∞ –∏–Ω–¥–µ–∫—Å–æ–≤              | `156`           |
| `--extremes`       | –ü–æ—Ä–æ–≥ —ç–∫—Å—Ç—Ä–µ–º—É–º–æ–≤ –≤ –ø—Ä–æ—Ü–µ–Ω—Ç–∞—Ö                      | `5`             |
| `--cache`          | –ü–∞–ø–∫–∞ –∫–µ—à–∞ –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤                      | `./cot_cache`   |
| `--force-download` | –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö               | `False`         |
| `--plot`           | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è PNG-–≥—Ä–∞—Ñ–∏–∫–æ–≤                             | `False`         |
| `--verbose`        | –†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ –ª–æ–≥–∏                                   | `False`         |

---

## üìä –ü—Ä–∏–º–µ—Ä —Ä–µ–∑—É–ª—å—Ç–∞—Ç–∞

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ñ–∞–π–ª—ã –≤ —É–∫–∞–∑–∞–Ω–Ω–æ–π –ø–∞–ø–∫–µ (`cot_out` –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é):

```
cot_out/
‚îú‚îÄ‚îÄ cot_data.csv
‚îú‚îÄ‚îÄ cot_data.json
‚îú‚îÄ‚îÄ cot_EUR_noncommercial.png
‚îî‚îÄ‚îÄ cot_GC_noncommercial.png
```

### –ü—Ä–∏–º–µ—Ä –∫–æ–Ω—Å–æ–ª—å–Ω–æ–≥–æ –≤—ã–≤–æ–¥–∞:

```
14:22:03 [INFO] –°–∫–∞—á–∏–≤–∞—é https://www.cftc.gov/dea/futures/deacotdisagg.txt ...
14:22:06 [INFO] –ù–∞–π–¥–µ–Ω–æ 750 —Å—Ç—Ä–æ–∫ –¥–ª—è EURO FX
14:22:07 [INFO] –ù–∞–π–¥–µ–Ω–æ 740 —Å—Ç—Ä–æ–∫ –¥–ª—è GOLD
14:22:07 [INFO] –≠–∫—Å–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞–Ω–æ: cot_data.csv
14:22:07 [INFO] –ì—Ä–∞—Ñ–∏–∫ —Å–æ—Ö—Ä–∞–Ω—ë–Ω: cot_EUR_noncommercial.png
14:22:07 [INFO] –ì–æ—Ç–æ–≤–æ!
```

---

## üìà –†–∞—Å—á—ë—Ç–Ω—ã–µ —Ñ–æ—Ä–º—É–ª—ã

**Net Positions:**

```
Net = Long - Short
```

**COT Index:**

```
COT Index = 100 * (Net - MIN(Net, N)) / (MAX(Net, N) - MIN(Net, N))
```

**COT Percentile:**

```
–ü—Ä–æ—Ü–µ–Ω—Ç–∏–ª—å –ø–æ–∑–∏—Ü–∏–∏ –∑–∞ –ø–æ—Å–ª–µ–¥–Ω–∏–µ N –Ω–µ–¥–µ–ª—å (0‚Äì100%)
```

**Z-score:**

```
Z = (Net - –°—Ä–µ–¥–Ω–µ–µ(Net, N)) / –°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–µ_–æ—Ç–∫–ª(Net, N)
```

**–≠–∫—Å—Ç—Ä–µ–º—É–º—ã:**

* –ü–µ—Ä–µ–ø—Ä–æ–¥–∞–Ω–Ω–æ—Å—Ç—å: `COT Percentile <= extremes`
* –ü–µ—Ä–µ–∫—É–ø–ª–µ–Ω–Ω–æ—Å—Ç—å: `COT Percentile >= 100 - extremes`

---

## üß≠ –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ä—ã–Ω–∫–∏ (–ø–æ —É–º–æ–ª—á–∞–Ω–∏—é)

| –ê–ª–∏–∞—Å | –ù–∞–∑–≤–∞–Ω–∏–µ —Ä—ã–Ω–∫–∞  | –ò—Å—Ç–æ—á–Ω–∏–∫ —Ü–µ–Ω—ã (yfinance) |
| ----- | --------------- | ------------------------ |
| `EUR` | Euro FX         | `6E=F`                   |
| `DX`  | US Dollar Index | `DX-Y.NYB`               |
| `GC`  | Gold            | `GC=F`                   |
| `CL`  | Crude Oil WTI   | `CL=F`                   |
| `ES`  | E-mini S&P 500  | `ES=F`                   |

–í—ã –º–æ–∂–µ—Ç–µ –¥–æ–±–∞–≤–∏—Ç—å —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ —Ä—ã–Ω–∫–∏ —á–µ—Ä–µ–∑ JSON/CSV –º–∞–ø–ø–∏–Ω–≥ (—Å–º. —Ñ–ª–∞–≥ `--alias-file` –≤ –±—É–¥—É—â–∏—Ö –≤–µ—Ä—Å–∏—è—Ö).

---

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
COT-Report-Analyzer/
‚îú‚îÄ‚îÄ cot.py
‚îú‚îÄ‚îÄ README.md
‚îú‚îÄ‚îÄ LICENSE
‚îú‚îÄ‚îÄ cot_cache/
‚îî‚îÄ‚îÄ cot_out/
```

---

## üß± –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ –∫–æ–¥–∞

* **main()** ‚Äî –ø–∞—Ä—Å–∏–Ω–≥ –∞—Ä–≥—É–º–µ–Ω—Ç–æ–≤ –∏ –æ–±—â–∏–π workflow
* **fetch_cftc_data()** ‚Äî –∑–∞–≥—Ä—É–∑–∫–∞ COT-—Ñ–∞–π–ª–æ–≤ –∏ –∫–µ—à–∏—Ä–æ–≤–∞–Ω–∏–µ
* **parse_cftc_text()** ‚Äî —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –∏ –ø–∞—Ä—Å–∏–Ω–≥ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º
* **compute_metrics()** ‚Äî —Ä–∞—Å—á—ë—Ç –∏–Ω–¥–µ–∫—Å–æ–≤ –∏ –ø–µ—Ä—Ü–µ–Ω—Ç–∏–ª–µ–π
* **detect_extremes()** ‚Äî –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —ç–∫—Å—Ç—Ä–µ–º—É–º–æ–≤
* **plot_market()** ‚Äî –≤–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è
* **export_data()** ‚Äî —ç–∫—Å–ø–æ—Ä—Ç –≤ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ —Ñ–æ—Ä–º–∞—Ç—ã

---

## üß™ –ü–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è

* –î–æ–±–∞–≤–∏—Ç—å –ø–æ–¥–¥–µ—Ä–∂–∫—É **—Ü–µ–Ω –∏–∑ Yahoo Finance**
* –ü–æ–∏—Å–∫ **–¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏–π** –º–µ–∂–¥—É —Ü–µ–Ω–æ–π –∏ –ø–æ–∑–∏—Ü–∏–µ–π —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤
* –í–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–µ—Ä–µ–∑ **Streamlit**
* Telegram-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –æ –Ω–æ–≤—ã—Ö —Å–∏–≥–Ω–∞–ª–∞—Ö
* –ö—Ä–æ—Å—Å-—Ä—ã–Ω–∫–æ–≤–æ–µ —Å—Ä–∞–≤–Ω–µ–Ω–∏–µ —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤ (Dealer / Managed Money –∏ —Ç.–ø.)

---

## üìú –õ–∏—Ü–µ–Ω–∑–∏—è

–ü—Ä–æ–µ–∫—Ç —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è–µ—Ç—Å—è –ø–æ–¥ –ª–∏—Ü–µ–Ω–∑–∏–µ–π [MIT](LICENSE). –í—ã –º–æ–∂–µ—Ç–µ —Å–≤–æ–±–æ–¥–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å, –∏–∑–º–µ–Ω—è—Ç—å –∏ —Ä–∞—Å–ø—Ä–æ—Å—Ç—Ä–∞–Ω—è—Ç—å –∫–æ–¥ —Å —É–∫–∞–∑–∞–Ω–∏–µ–º –∞–≤—Ç–æ—Ä–∞.
